# ğŸ¯ NOVO FLUXO DE CHECKOUT - ESTILO IFOOD

**Data:** 19/10/2025  
**Objetivo:** Criar checkout em mÃºltiplas etapas seguindo design das imagens

---

## ğŸ“‹ ANÃLISE DAS IMAGENS

### **Imagem 1 e 3: PÃ¡gina de Resumo (ADAPTADO PARA PIZZARIA)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—‹ delivery    âœ“ balcÃ£o             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  seu pedido                         â”‚
â”‚                                     â”‚
â”‚  1x  Pizza Calabresa      R$ 45,00  â”‚
â”‚      Tamanho: Tradicional           â”‚
â”‚      Sabores: Calabresa             â”‚
â”‚      Borda: Catupiry      + R$ 8,00 â”‚
â”‚      ObservaÃ§Ãµes: Sem cebola        â”‚
â”‚                                     â”‚
â”‚  1x  Coca-Cola 2L         R$ 10,00  â”‚
â”‚                                     â”‚
â”‚                    entrega: R$ 5,00 â”‚
â”‚                   subtotal: R$ 63,00â”‚
â”‚                                     â”‚
â”‚                      total:         â”‚
â”‚                   R$ 68,00          â”‚
â”‚                                     â”‚
â”‚  [CONTINUAR]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Imagem 2: PÃ¡gina de Entrega e Pagamento (ADAPTADO PARA PIZZARIA)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† entrega e pagamento              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  endereÃ§o de entrega                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Casa â€¢ ğŸï¸ R$ 5,00          â”‚   â”‚
â”‚  â”‚ Rua das Flores, 123         â”‚ â†” â”‚
â”‚  â”‚ Centro, SÃ£o JosÃ© dos Campos â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  seu pedido                         â”‚
â”‚  1x  Pizza Calabresa      R$ 45,00  â”‚
â”‚  1x  Coca-Cola 2L         R$ 10,00  â”‚
â”‚  1x  Borda Catupiry       R$  8,00  â”‚
â”‚                   subtotal: R$ 63,00â”‚
â”‚                    entrega: R$  5,00â”‚
â”‚                      total: R$ 68,00â”‚
â”‚                                     â”‚
â”‚  [alguma observaÃ§Ã£o?]               â”‚
â”‚  Ex: Sem cebola, bem assada         â”‚
â”‚                                     â”‚
â”‚  como vai ser o pagamento?          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ pelo app â”‚  â”‚na entregaâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                     â”‚
â”‚  Se "pelo app":                     â”‚
â”‚  â€¢ Pix                              â”‚
â”‚  â€¢ Mercado Pago (futuro)            â”‚
â”‚                                     â”‚
â”‚  Se "na entrega":                   â”‚
â”‚  â€¢ Dinheiro (com troco)             â”‚
â”‚  â€¢ CartÃ£o DÃ©bito                    â”‚
â”‚  â€¢ CartÃ£o CrÃ©dito                   â”‚
â”‚                                     â”‚
â”‚  [FINALIZAR PEDIDO]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ• ESTRUTURA DE PRODUTOS DA PIZZARIA

### **Tipos de Produtos:**
1. **Pizzas Salgadas** - tipo: 'salgada'
   - Tamanho: Tradicional ou Broto
   - Sabores: 1, 2 ou 3 sabores
   - Borda recheada (opcional)
   - Adicionais por sabor (opcional)
   - ObservaÃ§Ãµes

2. **Pizzas Doces** - tipo: 'doce'
   - Tamanho: Tradicional ou Broto
   - Sabores: 1, 2 ou 3 sabores
   - ObservaÃ§Ãµes

3. **Bebidas** - tipo: 'bebida'
   - Sem customizaÃ§Ã£o
   - Apenas quantidade

4. **PromoÃ§Ãµes** - tipo: 'salgada' + promocao: true
   - Apenas balcÃ£o (nÃ£o delivery)

### **Estrutura do Item no Carrinho:**
```typescript
{
  productId: string,
  name: string,
  tipo: 'salgada' | 'doce' | 'bebida',
  size: 'tradicional' | 'broto' | null,
  flavors: [{ nome: string, preco: number }],
  bordaRecheada: { nome: string, preco: number } | null,
  adicionais: [{ nome: string, preco: number }],
  quantity: number,
  price: number,
  observacoes: string | null
}
```

### **ExibiÃ§Ã£o no Resumo:**
```
Pizza (1 sabor):
  1x Pizza Calabresa          R$ 45,00
     Tamanho: Tradicional
     Sabor: Calabresa

Pizza (2 sabores):
  1x Pizza Mista              R$ 50,00
     Tamanho: Tradicional
     Sabores: Calabresa, Mussarela

Pizza com borda:
  1x Pizza Portuguesa         R$ 58,00
     Tamanho: Tradicional
     Sabor: Portuguesa
     Borda: Catupiry         + R$ 8,00

Bebida:
  1x Coca-Cola 2L             R$ 10,00
```

---

## ğŸ¯ ESTRUTURA DO NOVO FLUXO

### **ETAPA 1: `/checkout` - Resumo do Pedido**

**Elementos:**
- âœ… Toggle: Delivery / BalcÃ£o (no topo)
- âœ… TÃ­tulo: "seu pedido"
- âœ… Lista de itens com detalhes
- âœ… Subtotal
- âœ… Taxa de entrega (se delivery)
- âœ… Total grande e destacado
- âœ… BotÃ£o: "CONTINUAR" (roxo)

**LÃ³gica:**
- Se delivery: mostra taxa
- Se balcÃ£o: sem taxa
- Valida se tem itens no carrinho
- Redireciona para `/checkout/entrega-pagamento`

---

### **ETAPA 2: `/checkout/entrega-pagamento` - FinalizaÃ§Ã£o**

**Elementos:**
- âœ… Header: "â† entrega e pagamento"
- âœ… Card de endereÃ§o (se delivery)
  - Nome do endereÃ§o
  - Taxa
  - Rua, nÃºmero
  - Bairro, cidade
  - BotÃ£o para alterar (â†”)
- âœ… Resumo do pedido (compacto)
- âœ… Campo de observaÃ§Ãµes
- âœ… Forma de pagamento:
  - **OpÃ§Ã£o 1:** "pelo app" (Pix, Mercado Pago)
  - **OpÃ§Ã£o 2:** "na entrega" (Dinheiro, CartÃ£o)
- âœ… Se dinheiro: campo "Troco para quanto?"
- âœ… BotÃ£o: "FINALIZAR PEDIDO"

---

## ğŸ—„ï¸ BANCO DE DADOS

### **Tabela `pedidos` - JÃ¡ existe!**
```sql
âœ… forma_pagamento VARCHAR
   - 'pix'
   - 'mercado_pago'
   - 'dinheiro'
   - 'cartao_debito'
   - 'cartao_credito'

âœ… troco_para NUMERIC
âœ… observacoes TEXT
```

### **NÃ£o precisa criar nada novo!** âœ…

---

## ğŸ“ ARQUIVOS A CRIAR/MODIFICAR

### **Criar:**
1. `app/checkout/page.tsx` (NOVO - Etapa 1)
2. `app/checkout/entrega-pagamento/page.tsx` (NOVO - Etapa 2)

### **Modificar:**
- Nenhum! Vamos criar do zero

---

## ğŸ¨ DESIGN SYSTEM

### **Cores:**
```css
- Primary: #8B5CF6 (roxo)
- Success: #10B981 (verde)
- Text: #6B7280 (cinza)
- Background: #F9FAFB (cinza claro)
```

### **Componentes:**
- Toggle (Delivery/BalcÃ£o)
- Card de endereÃ§o
- Card de item do pedido
- BotÃµes de pagamento
- Input de observaÃ§Ãµes
- Input de troco

---

## âœ… CHECKLIST DE IMPLEMENTAÃ‡ÃƒO

### **Etapa 1: PÃ¡gina de Resumo**
- [ ] Criar `/checkout/page.tsx`
- [ ] Toggle delivery/balcÃ£o
- [ ] Lista de itens
- [ ] CÃ¡lculo de total
- [ ] BotÃ£o continuar
- [ ] ValidaÃ§Ãµes

### **Etapa 2: PÃ¡gina de Entrega e Pagamento**
- [ ] Criar `/checkout/entrega-pagamento/page.tsx`
- [ ] Card de endereÃ§o
- [ ] Resumo compacto
- [ ] Campo de observaÃ§Ãµes
- [ ] SeleÃ§Ã£o de pagamento
- [ ] Campo de troco (condicional)
- [ ] BotÃ£o finalizar
- [ ] IntegraÃ§Ã£o com funÃ§Ã£o SQL

---

## ğŸ”„ FLUXO COMPLETO

```
1. Cliente adiciona produtos ao carrinho
2. Clica em "Finalizar Pedido"
3. â†’ /checkout (Etapa 1)
   - Escolhe delivery ou balcÃ£o
   - VÃª resumo do pedido
   - Clica "CONTINUAR"
4. â†’ /checkout/entrega-pagamento (Etapa 2)
   - Se delivery: vÃª/edita endereÃ§o
   - Escolhe forma de pagamento
   - Adiciona observaÃ§Ãµes
   - Se dinheiro: informa troco
   - Clica "FINALIZAR PEDIDO"
5. â†’ Pedido criado no banco
6. â†’ /pedido/[id] (Acompanhamento)
```

---

## ğŸš€ VANTAGENS DO NOVO FLUXO

âœ… Mais limpo e organizado  
âœ… Etapas claras  
âœ… Foco em uma coisa por vez  
âœ… Melhor UX mobile  
âœ… Menos scroll  
âœ… Visual moderno  
âœ… Igual ao iFood  

---

**Pronto para implementar!** ğŸŠ
